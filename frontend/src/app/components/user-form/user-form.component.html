<h3 class="center-title">{{ title }}</h3>
<div class="form-container">
  <form #f="ngForm" (ngSubmit)="submit(f)" class="mt-3 form-box">
    <div class="form-row">
      <label class="form-label">Tên</label>
      <input #usernameInput class="form-control" name="username" [(ngModel)]="model.username" required [readonly]="mode !== 'create'" #username="ngModel">
    </div>

    <div class="form-row">
      <label class="form-label">Tên đầy đủ</label>
      <input #fullnameInput class="form-control" name="fullname" [(ngModel)]="model.fullname" required [readonly]="mode === 'view'" #fullname="ngModel">
    </div>

    <div class="form-row" *ngIf="mode !== 'view'">
      <label class="form-label">Mật khẩu</label>
      <input class="form-control" name="password" type="password" [(ngModel)]="model.password">
    </div>

    <div class="form-row">
      <label class="form-label">Vai trò</label>
      <select id="role" [(ngModel)]="model.role" name="role" class="form-select" [disabled]="mode === 'view'">
        <option *ngFor="let r of roles" [value]="r">{{ getRoleName(r) }}</option>
      </select>
    </div>

    <div *ngIf="f.submitted && username.invalid" class="text-danger mb-2 text-center">
      Vui lòng nhập tên
    </div>
    <div *ngIf="f.submitted && fullname.invalid" class="text-danger mb-2 text-center">
      Vui lòng nhập tên đầy đủ
    </div>
    <div *ngIf="errorMessage" class="text-danger mb-2 text-center">
      {{ errorMessage }}
    </div>
    <div class="button-group mt-3" *ngIf="mode !== 'view'">
      <button class="btn btn-success me-2" type="submit" [disabled]="submitting">
        {{ submitting ? 'Đang lưu...' : 'Lưu' }}
      </button>
      <a routerLink="/users" class="btn btn-danger">Hủy</a>
    </div>
    <div class="button-group mt-3" *ngIf="mode === 'view'">
      <a routerLink="/users" class="btn btn-primary">Trở về</a>
    </div>
  </form>
</div>
