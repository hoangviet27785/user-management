{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/user.service\";\nimport * as i3 from \"@angular/forms\";\nexport let UserFormComponent = /*#__PURE__*/(() => {\n  class UserFormComponent {\n    constructor(route, router, userService) {\n      this.route = route;\n      this.router = router;\n      this.userService = userService;\n      this.model = {\n        name: '',\n        role: '',\n        create_at: ''\n      };\n      this.title = 'Thêm người dùng';\n      this.submitting = false;\n    }\n    ngOnInit() {\n      const idParam = this.route.snapshot.paramMap.get('id');\n      if (idParam) {\n        this.id = +idParam;\n        this.title = 'Cập nhật người dùng';\n        this.userService.getById(this.id).subscribe({\n          next: u => this.model = u,\n          error: e => console.error('Load user failed', e)\n        });\n      }\n    }\n    submit(form) {\n      if (form.invalid) return;\n      this.submitting = true;\n      const payload = {\n        name: this.model.name,\n        role: this.model.role,\n        create_at: this.model.create_at\n      };\n      const obs = this.id ? this.userService.update(this.id, payload) : this.userService.createUser(payload);\n      obs.subscribe({\n        next: () => this.router.navigate(['/users']),\n        error: e => {\n          this.submitting = false;\n          alert('Fail to save user');\n          console.error(e);\n        }\n      });\n    }\n    static {\n      this.ɵfac = function UserFormComponent_Factory(t) {\n        return new (t || UserFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UserFormComponent,\n        selectors: [[\"app-user-form\"]],\n        decls: 16,\n        vars: 5,\n        consts: [[\"f\", \"ngForm\"], [1, \"mt-3\", 3, \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\"], [\"name\", \"name\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"role\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 2, \"margin-right\", \"10px\", 3, \"disabled\"], [\"routerLink\", \"/users\", 1, \"btn\", \"btn-danger\"]],\n        template: function UserFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"h3\");\n            i0.ɵɵtext(1);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"form\", 1, 0);\n            i0.ɵɵlistener(\"ngSubmit\", function UserFormComponent_Template_form_ngSubmit_2_listener() {\n              i0.ɵɵrestoreView(_r1);\n              const f_r2 = i0.ɵɵreference(3);\n              return i0.ɵɵresetView(ctx.submit(f_r2));\n            });\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"label\", 3);\n            i0.ɵɵtext(6, \"T\\u00EAn\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UserFormComponent_Template_input_ngModelChange_7_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.model.name, $event) || (ctx.model.name = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 2)(9, \"label\", 3);\n            i0.ɵɵtext(10, \"Vai tr\\u00F2\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"input\", 5);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UserFormComponent_Template_input_ngModelChange_11_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.model.role, $event) || (ctx.model.role = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"button\", 6);\n            i0.ɵɵtext(13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"a\", 7);\n            i0.ɵɵtext(15, \"Cancel\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate(ctx.title);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.model.name);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.model.role);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.submitting);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.submitting ? \"Save...\" : \"Save\", \" \");\n          }\n        },\n        dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, i1.RouterLink],\n        encapsulation: 2\n      });\n    }\n  }\n  return UserFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}